<!DOCTYPE HTML>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="https://d3js.org/d3.v4.0.0-rc.2.js" charset="utf-8"></script>
		<script src="robustD3.js" charset="utf-8"></script>
		<link href="" rel = "stylesheet"/>
	</head>
	<body>
		<script>
			//dataScrub is a case by case function
			dataScrub = function(d, i){
				//find a completely blank line, inorder to ignore
				getArray = Object.keys(d).map(function (key) {return d[key] == undefined || d[key] == ""; });

				if(     (!getArray.every(function(x) {return x == true; }) )){
					return{
						"class" : d.class,
						"petalLength" : +d.petalLength,
						"petalWidth"  : +d.petalWidth,
						"sepalLength" : +d.sepalLength,
						"sepalWidth"  : +d.sepalWidth,
					}
				} 
			}
		
			getFreq = function(data, variable){
				freqObj = {}
				data.forEach(function(d){ 
					var getValue = d[variable];
					freqObj[getValue] = freqObj[getValue] == undefined ? 1 : freqObj[getValue] + 1;
				})
				
				var newArray = Object.keys(freqObj).map(function(key) { 
					var tempObj = {};
					tempObj[variable] = key
					tempObj["Freq"]   = freqObj[key]
					return tempObj;
				});
				return newArray;
			}


			d3.csv("shortIris.csv", dataScrub ,function(data){
			//	data = getFreq(data, "petalLength")
				var newCanvas = canvas("canvas2", 750, 750);	
				newCanvas.barChart(data,"petalLength", "petalWidth");

			})
		</script>
	</body>
</html>
